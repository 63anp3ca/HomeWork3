<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <link href="style.css" rel="stylesheet" type="text/css"/>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <!-- Latest compiled and minified JavaScript -->
  <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" -->
  <!-- integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> -->
</head>
<body>
  <div class='container'>
    <div class="page-header">
      <h1>VISUAL ANALYTICS
        <small>201820 </small>
      </h1>
    </div>
      <div class="col-md-9">
        <h1 ALIGN=center><b>Salidas de Colombianos desde el territorio nacional.</b></h1>
        <p>Muestra el consolidado de salidas de colombianos desde el territorio nacional a partir del 2012 al 2018, discriminado por país destino y género</p>
        <p>Información extraída del portal Datos Abierto de Colombia en el siguiente enlace: https://www.datos.gov.co/Estad-sticas-Nacionales/Salidas-de-colombianos-desde-el-territorio-naciona/efw5-jiej</p>
        <div id="tooltip" height="50"></div>
        <svg width="900" height="100"></svg>
      </div>
      <div class="col-md-3">
        <button class="btn btn-primary" id="no-outliers1">CODE</button>
        <button class="btn btn-primary" id="no-outliers2">Slides </button>
        <button class="btn btn-primary" id="no-outliers1">Facebook</button>
        <h3>Guia:</h3>
        <p>  En la visualización nos permiste pasandando el mouse sobre cada Circulo obtener informacion más detalla por genero (Femenino  o Masculino)</p>
        <img src="tabulacion.JPG" alt="..">
      </div>
  </div>
<h1 ALIGN=center><b>Gráfica Salidas de Colombianos al Exterior 2018.</b></h1>
  
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script >
     var resource = 'https://raw.githubusercontent.com/63anp3ca/HomeWork3/master/2018-2.json';
    // var format = d3.time.format("%Y-%m-%d"),
     var  margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = 1000 - margin.left - margin.right,
        height = 1000 - margin.top - margin.bottom;
    var force = d3.layout.force()
          .gravity(0.1)
          .charge(function(d, i) { return d.amount * -.2; })
          .size([width, height]);
    var color = d3.scale.category10();
    var svg = d3.select("body")
                .append("svg")
                  .attr("width", width + margin.left + margin.right)
                  .attr("height", height + margin.top + margin.bottom)
                .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    d3.json(resource, function(error, data) {
      console.log(data)
      data.forEach(function(d) {
        d.pais = d.PAIS;
        d.femenino = d.FEMENINO;
        d.masculino = d.MASCULINO;
        d.amount = parseInt(d.TOTAL);
        console.log("Spent $" + d.amount + " on " + d.pais);
      });
      force
        .nodes(data)
        .start();
      var node = svg.selectAll("g.node")
          .data(data)
          .enter()
          .append("g")
            .attr("class", "node")
            .call(force.drag);
      node.append("circle")
            .attr("r", function(d) { return d.amount * .019 })
            .attr("opacity", .67)
            .attr("fill", function(d){
              if (d.amount <= 1000) {
                return "#a6cee3"  // Green
              } else if (d.amount > 1000 && d.amount <= 2000) {
                return "#1f78b4"  // Yellow
              } else if (d.amount > 2000 && d.amount <= 3000) {
                return "#b2df8a"  // Orange
              } else if (d.amount > 3000 && d.amount <= 4000) {
                return "#33a02c"  // Orange
              } else if (d.amount > 4000 && d.amount <= 5000) {
                return "#fb9a99"  // Orange
              } else if (d.amount > 5000 && d.amount <= 6000) {
                return "#e31a1c"  // Orange
              } else if (d.amount > 6000 && d.amount <= 7000) {
                return "#fdbf6f"  // Orange
              } else if (d.amount > 7000 && d.amount <= 8000) {
                return "#ff7f00"  // Orange
              } else if (d.amount > 8000 && d.amount <= 9000) {
                return "#6a3d9a"  // Orange
              } else {
                return "#cab2d6"  // Red
              }
            });
      //  textos interno ciculo
      node.append("text")
            .text(function(d){ return d.pais; })
            .attr('fill', '#252525')
            .attr('font-size', 12)
            .attr('dx', -16)
            .attr('dy', -5);
      //  textos interno ciculo
      node.append("text")
            .text(function(d){ return  d.amount; })
            .attr('font-size', 10)
            .attr('fill', '#ffffff')
            .attr('dx', -16)
            .attr('dy', 10);
      // texto pista
      node.append("title")
            .text(function(d) { return d.pais + ":" + d.amount + "\n" +"Femenino:" + d.femenino + "\n" +"Masculino:" + d.masculino; });
      force.on("tick", function() {
        node
          .attr('transform', function(d) { return 'translate('+ Math.max(20, Math.min(width-20, d.x)) + ',' + Math.max(20, Math.min(height-20, d.y)) + ')'; });
      });
    })
  </script>
 
 <footer align="center" style="font-size: 12px;">
            Gerardo Antonio Perez Clavijo<br> 
            Código: 20151406<br> 
            Correo: ga.perez@uniandes.edu.co<br> 
            Universidad de los Andes<br> 
            Maestría en Ingeniería de la Información            
 </footer>
</body>